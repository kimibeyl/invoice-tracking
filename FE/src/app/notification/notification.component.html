<div class="container">
  <p-card header="Notifications">
  <app-table
    colId="notificationId"
    [items]="items()"
    [cols]="cols()"
    [loading]="loading()"
    [(selected)]="selected"
    [showCheckbox]="true"
    [totalRecords]="totalRecords()"
    [inputForm]="searchForm"
    (onRowSelect)="getInvoiceDetails($event)"
    (onLazyLoad)="searchNotifications($event)"
    [selectedItemsTemplate]="actions"
  >
    <ng-template #actions>
      <div class="flex gap-2">
        <p-button
          (click)="markAsRead()"
        >
          Mark as read
        </p-button>
      </div>
    </ng-template>
  </app-table>
</p-card>
</div>
@if(openInvoiceDialog()) {
  <app-dialog [dialog]="dialog()" (secondaryActionChange)="openInvoiceDialog.set(false)" [template]="invoiceFormTemplate">
    <ng-template #invoiceFormTemplate>
      @if(!loadingInvoice()) {
      <form [formGroup]="createInvoiceForm">
        <div class="form-group">
          <input type="text" pInputText formControlName="invoiceNumber" />
          <input type="text" pInputText formControlName="invoiceDate" />
          <input type="text" pInputText formControlName="amount" />
          <input type="text" pInputText formControlName="vatAmount" />
          <input type="text" pInputText formControlName="status" />
        </div>
      </form>
      }
      @else {
        <p-skeleton width="100%" height="2rem" />
      }
    </ng-template>
  </app-dialog>
}
